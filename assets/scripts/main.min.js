import jquery from"jquery";var $=jquery,jQuery=jquery;import fitText from"./jquery-plugins/jquery.fittext.js";fitText(jquery),window.$=window.jQuery=jquery;import webpackVariables from"webpackVariables";window.webpackVariables=webpackVariables,window.windowinsets=document.body.windowinsets={left:0,top:0,right:0,bottom:0},detectDeviceType();const fakeBlurCanvas=document.createElement("canvas");window.fakeBlurCanvas=fakeBlurCanvas;const bridgeEvents=new Set;window.onBridgeEvent=(...event)=>{bridgeEvents.forEach(l=>l(...event))};var initialinset=[0,0];window.initialinset=initialinset;var initialinsetmutable=!0;bridgeEvents.add((name,args)=>{"systemBarsWindowInsetsChanged"==name&&(windowinsets=JSON.parse(Bridge.getSystemBarsWindowInsets()),insetF(),initialinset=[Math.max(initialinset[0],windowinsets.top),Math.max(initialinset[1],windowinsets.bottom)],Object.keys(windowinsets).forEach(element=>{$("body").css("--window-inset-"+element,windowinsets[element]+"px")}),initialinsetmutable&&(setTimeout(()=>{initialinsetmutable=!1},1e3),$("body").css("--init-inset-0",initialinset[0]+"px"),$("body").css("--init-inset-1",initialinset[1]+"px")))});import cupertinoElements from"./cupertinoElements.js";import eventReloads from"./eventReloads.js";import springBoard from"./springBoardEvents.js";import BScroll from"better-scroll";import startUpSequence from"./libraries/startUpSequence.js";import easings from"../scripts/libraries/easings.js";import iconizer from"./libraries/iconizer.js";import{getDB,setDB,resetDB}from"./libraries/indexedDBHelper.js";function detectDeviceType(){const queryString=window.location.search,urlParams=new URLSearchParams(queryString);var screenWidth=document.body.clientWidth,screenHeight=document.body.clientHeight,diagonalLength=Math.sqrt(Math.pow(screenWidth,2)+Math.pow(screenHeight,2)),phoneThreshold=1100,tabletThreshold=900,answer="phone";return"tablet"==(answer=urlParams.has("tablet")?"true"==urlParams.get("tablet").toLowerCase()?"tablet":"phone":diagonalLength<=1100?"phone":"tablet")?(document.body.TABLET_VIEW=!0,document.body.classList.add("TABLET_VIEW")):(document.body.TABLET_VIEW=!1,document.body.classList.remove("TABLET_VIEW")),springBoard.relocateIcons(),answer}window.cupertinoElements=cupertinoElements,window.springBoard=springBoard,window.BScroll=BScroll,window.easings=easings,window.getDB=getDB,window.setDB=setDB,window.resetDB=resetDB,$("#dock").append(new cupertinoElements.appIcon("/mock/icons/default/com.google.android.dialer.png","bb","cc")),$("#dock").append(new cupertinoElements.appIcon("/mock/icons/default/com.google.android.apps.messaging.png","bb","cc")),$("#dock").append(new cupertinoElements.appIcon("../mock/icons/default/com.android.chrome.png","bb","cc")),$("#dock").append(new cupertinoElements.appIcon("/mock/icons/default/com.tored.bridgelauncher.png","bb","cc"));var TABLET_VIEW=document.body.TABLET_VIEW;springBoard.relocateIcons(),$(window).on("resize",springBoard.relocateIcons),$(window).on("resize",(function(){var appGridInner,config})),springBoard.getDB(),springBoard.relocateIcons();var center=[document.body.clientWidth/2,document.body.clientHeight/2];function insetF(){}async function initializeIcons(){const db=await getDB();if(window.icons={dsf:"dsklfgÅŸnsa"},db.iconpack)for(const[packageName,blob]of Object.entries(db.iconpack))window.icons[packageName]=URL.createObjectURL(blob)}window.loadApps=function loadApps(){springBoard.reloadApps((function(){const homeScroller=new BScroll($("#pages-wrapper")[0],{scrollX:!0,scrollY:!1,momentum:!1,bounce:!0,disableMouse:!1,disableTouch:!1,slide:{loop:!1,autoplay:!1,threshold:0},HWCompositing:!1,click:!0,tap:"tap",phoneThreshold:0,tabletThreshold:0,threshold:0});window.homeScroller=homeScroller,springBoard.relocateIcons(),springBoard.relocateIconMovingSpots(),homeScroller.cancel=function(){const scrollContainer=document.querySelector("#pages-wrapper"),touchEndEvent=new TouchEvent("touchend",{bubbles:!0,cancelable:!0,view:window}),mouseUpEvent=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0,view:window});scrollContainer.dispatchEvent(mouseUpEvent),scrollContainer.dispatchEvent(touchEndEvent)},window.homeScroller=homeScroller;const bs=window.homeScroller;bs.scroller.translater.hooks.on("beforeTranslate",(transformStyle,point)=>{var transformString,pxRegex,matches,pxValue,roundedPxValue;clearTimeout(window.entereditmodetimeout)}),bs.scroller.actions.hooks.on("scrollStart",()=>{eventReloads.appIcon(),$("#pages").addClass("scrollHelper"),$("div.C_ELEMENT.APPICON > img.ICON.active").each((index,element)=>{element.cancelPress(),element.classList.add("cancelled")}),$("body").addClass("scrolling")}),bs.on("scrollEnd",()=>{$("body").removeClass("scrolling"),springBoard.drawFakeBlur.appUninstallIcon()}),$(window).on("pointerup",(function(){}))}))},$(window).on("contextmenu",(function(event){event.preventDefault()})),$(window).on("focus",(function(){})),$(window).on("blur",(function(){})),Bridge.requestSetNavigationBarAppearance("light-fg"),Bridge.requestSetStatusBarAppearance("light-fg"),$(window).on("load",(function(){windowinsets=JSON.parse(Bridge.getSystemBarsWindowInsets()),insetF(),Object.keys(windowinsets).forEach(element=>{$("body").css("--window-inset-"+element,windowinsets[element]+"px")}),Bridge.requestVibration||(Bridge.requestVibration=e=>{try{navigator.vibrate(e)}catch(e){}})})),$(window).on("load",(function(){})),$(window).on("pointerdown",(function(event){clearTimeout(window.entereditmodetimeout),("dock"==event.target.id||event.target.classList.contains("PAGEGRID"))&&(window.entereditmodetimeout=setTimeout(()=>{springBoard.enterEditMode()},1e3),window.editmodeprevios=window.inEditMode)})),$(window).on("pointerup",(function(event){clearTimeout(window.entereditmodetimeout),"dock"==event.target.id||event.target.classList.contains("PAGEGRID")})),$(window).on("click",(function(event){("dock"==event.target.id||event.target.classList.contains("PAGEGRID"))&&window.editmodeprevios&&springBoard.exitEditMode()})),window.redrawWallpaperCache=function redrawWallpaperCache(){fakeBlurCanvas.width=window.innerWidth,fakeBlurCanvas.height=window.innerHeight;var canvas=fakeBlurCanvas,ctx=canvas.getContext("2d"),img=$("#system_wallpaper")[0];const scaleFactor=Math.max(canvas.width/img.naturalWidth,canvas.height/img.naturalHeight),scaledWidth=img.naturalWidth*scaleFactor,scaledHeight=img.naturalHeight*scaleFactor,x=(canvas.width-scaledWidth)/2,y=(canvas.height-scaledHeight)/2;ctx.clearRect(0,0,canvas.width,canvas.height),ctx.drawImage(img,x,y,scaledWidth,scaledHeight)},$(window).on("load",(function(){$(window).on("resize",redrawWallpaperCache),redrawWallpaperCache(),$(window).on("resize",(function(){requestAnimationFrame(springBoard.drawFakeBlur.dock)})),springBoard.drawFakeBlur.dock()})),window.onappicondeleteshow=function(){console.log("burdayÄ±m")},window.appIconClick=function(el){console.log(el),Bridge.requestAppUninstall($(el).parent().attr("packagename"),!0)},$("#pages-wrapper").css("opacity","0"),window.finishLoading=function finishLoading(){setTimeout(()=>{function continueLoad(){$("#loader").addClass("hide"),setTimeout(()=>{$("#loader").remove(),$("#loaderstyle").remove(),requestAnimationFrame(()=>{$("#pages-wrapper").css("opacity",""),springBoard.animate.intro()})},300)}"development"!=webpackVariables.mode||webpackVariables.forceDevelopmentEnv?continueLoad():springBoard.alert("Warning!","This build is intended for development purposes. It may be unstable and/or slow. Please proceed with caution.",[{title:"Continue",style:"default",action:continueLoad},{title:"Cancel",style:"cancel",action:function(){const goodbyeMessages=["Looks like we're putting iCupertino's grand entrance on hold! ðŸš€","Whoopsie-doodle! iCupertino's launch party is postponed for now! ðŸŽ‰","Time to hit the brakes on the iCupertino hype train! ðŸš‚","Hold the phone! iCupertino's big reveal is taking a rain check! â˜”","Oops-a-daisy! iCupertino's debut is taking a chill pill for the moment! â„ï¸","Cancel culture strikes again! iCupertino's grand opening will have to wait! ðŸŽˆ","Well, well, well... Looks like iCupertino's debut is hitting snooze! â°","Hey there, party pooper! iCupertino's launch is on pause mode! ðŸ˜­","Breaking news: iCupertino's launch event has hit a speed bump! ðŸš§","Hold onto your hats! iCupertino's launch shenanigans are on temporary hold! ðŸŽ©"];$("body").children(":not(style, link, div.loader)").remove(),setTimeout(()=>{$("body").append(`<p class="goodbye">:(<br><br>${goodbyeMessages[Math.floor(Math.random()*goodbyeMessages.length)]}</p>`)},10)}}])},0)},startUpSequence([next=>{webpackVariables.forceDevelopmentEnv&&function forceSetupTest(){var db=springBoard.getDB();db.userSetup=!0,springBoard.setDB(db)}(),next()},next=>{"paintWorklet"in CSS?(CSS.paintWorklet.addModule("/node_modules/css-houdini-squircle/lib/squircle.js"),document.body.classList.add("squircle"),next()):(console.log("houdini not supported"),springBoard.alert("Warning!","WebView you are using is old/unsupported!",[{title:"Ok",style:"default",action:next}]))},next=>{if(1!=springBoard.getDB().userSetup)if(null==springBoard.getDB().userSetup){var db=springBoard.getDB();db.userSetup=!1,springBoard.setDB(db)}else springBoard.userSetupView.enter();else next()},next=>{redrawWallpaperCache(),springBoard.drawFakeBlur.dock(),next()},next=>{!async function(){const db=await getDB();db.iconpack||(db.iconpack={},await setDB(db)),fetch(Bridge.getAppsURL()).then(resp=>resp.json()).then(async resp=>{window.allappsarchive=resp.apps;const resicons=await iconizer(resp.apps.map((function(input){return{packageName:input.packageName,icon:Bridge.getDefaultAppIconURL(input.packageName)}})));if(console.log("rds",resicons),Object.keys(resicons).length>=0){console.log("kaydeditorum");const oldlist=new Set(Object.entries(db.iconpack)),newlist=new Set(Object.entries(resicons));db.iconpack=Object.fromEntries(new Set([...oldlist,...newlist])),await setDB(db)}else console.log("yeni Ã¶ÄŸe yok");next()})}()},async next=>{var imagesLoaded=0,totalImages=$("img").length;function allImagesLoaded(){console.log("ALL IMAGES LOADED")}$("img").on("load",(function(event){imagesLoaded++,console.log("images load",imagesLoaded),imagesLoaded==totalImages&&allImagesLoaded()})),await initializeIcons(),next()},async next=>{loadApps(),requestAnimationFrame(next)}],finishLoading),window.console.image=function(url,size=100){if("string"==typeof url){const image=url;var style=["font-size: 1px;","padding: "+this.height/100*size+"px "+this.width/100*size+"px;","background: url("+url+") no-repeat;","background-size: contain;"].join(" ");console.log("%c ",style)}else{const image=new Image;image.src=url,image.onload=function(){var style=["font-size: 1px;","padding: "+this.height/100*size+"px "+this.width/100*size+"px;","background: url("+url+") no-repeat;","background-size: contain;"].join(" ");console.log("%c ",style)}}};